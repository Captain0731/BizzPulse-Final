# Render Deployment Guide

## âœ… Production-Ready Flask App

Render is **perfect** for Flask apps (unlike Vercel serverless).

---

## ðŸš€ Deploy to Render (5 Minutes)

### Option 1: Using render.yaml (Recommended)

1. **Push to GitHub**
   ```bash
   git add render.yaml build.sh requirements_production.txt app_refactored.py
   git commit -m "Add Render configuration"
   git push origin main
   ```

2. **Create Render Account**
   - Go to: https://render.com
   - Sign up with GitHub

3. **Create New Web Service**
   - Click "New +" â†’ "Web Service"
   - Connect GitHub repository: `BizzPulse-Final`
   - Render auto-detects `render.yaml`
   - Click "Apply"

4. **Render automatically:**
   - Creates PostgreSQL database
   - Sets DATABASE_URL
   - Generates SECRET_KEY
   - Deploys app

5. **Set Additional Environment Variables**
   - Dashboard â†’ Environment â†’ Add:
   ```
   RESEND_API_KEY=your_resend_key
   ADMIN_EMAIL=your_email@example.com
   ```

6. **Deploy!**
   - Render auto-deploys (takes 3-5 minutes first time)
   - Get URL: `https://bizzpulse.onrender.com`

---

### Option 2: Manual Configuration

1. **New Web Service**
   - Repository: `BizzPulse-Final`
   - Branch: `main`
   - Root Directory: (leave empty)

2. **Build & Start Commands**
   ```
   Build Command: pip install -r requirements_production.txt
   Start Command: gunicorn app_refactored:app --workers 2 --bind 0.0.0.0:$PORT
   ```

3. **Environment Variables**
   ```
   SECRET_KEY=<generate random string>
   FLASK_ENV=production
   DATABASE_URL=<Render PostgreSQL connection string>
   RESEND_API_KEY=<your_resend_key>
   ADMIN_EMAIL=<your_email>
   ```

4. **Add PostgreSQL Database**
   - Dashboard â†’ New â†’ PostgreSQL
   - Copy connection string to `DATABASE_URL`

---

## âœ… What Works on Render

âœ… Full Flask application with blueprints
âœ… PostgreSQL database (included)
âœ… Contact form with DB storage
âœ… Newsletter subscriptions with DB storage
âœ… Admin dashboard with data
âœ… Email notifications
âœ… PDF generation
âœ… All static pages
âœ… No cold starts (always-on in paid tier)
âœ… SSL certificate (automatic)
âœ… Custom domain support

---

## ðŸ“Š Render Free Tier

- **Web Service**: Free (spins down after 15 min idle)
- **PostgreSQL**: Free 90 days, then $7/month
- **Spin-down**: Cold start ~30s after idle
- **Upgrade**: $7/month for always-on

---

## ðŸ”§ Environment Variables

| Variable | Required | Description |
|----------|----------|-------------|
| `SECRET_KEY` | Yes | Auto-generated by Render |
| `DATABASE_URL` | Yes | Auto-set by PostgreSQL add-on |
| `RESEND_API_KEY` | Optional | For email functionality |
| `ADMIN_EMAIL` | Optional | Admin email for notifications |
| `FLASK_ENV` | Yes | Set to `production` |

---

## ðŸ§ª Test After Deployment

```bash
# Replace with your Render URL
URL="https://bizzpulse.onrender.com"

# Health check
curl $URL/api/health
# Expected: {"status":"healthy"}

# Homepage
curl $URL/
# Should return HTML

# Test contact form
curl -X POST $URL/api/contact \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test User",
    "email": "test@example.com",
    "message": "Hello from Render!"
  }'
```

---

## ðŸ”„ Auto-Deploy on Git Push

Render automatically redeploys when you push to `main`:

```bash
git add .
git commit -m "Update"
git push origin main
# Render auto-deploys in 2-3 minutes
```

---

## ðŸ“Š View Logs

**Live Logs:**
```
Render Dashboard â†’ Your Service â†’ Logs
```

**Or via CLI:**
```bash
# Install Render CLI
npm install -g render-cli

# View logs
render logs -s bizzpulse
```

---

## ðŸŒ Custom Domain

1. Dashboard â†’ Settings â†’ Custom Domain
2. Add: `yourdomain.com`
3. Update DNS:
   ```
   CNAME www  bizzpulse.onrender.com
   ALIAS @    bizzpulse.onrender.com
   ```

---

## ðŸ’¾ Database Backups

**Free tier:** Manual backups
**Paid tier:** Automatic daily backups

**Manual backup:**
```bash
# Export database
pg_dump DATABASE_URL > backup.sql

# Restore
psql DATABASE_URL < backup.sql
```

---

## ðŸ› Troubleshooting

### Build fails
- Check `requirements_production.txt` has all dependencies
- Verify Python 3.11 compatibility
- View build logs in Dashboard

### App crashes
- Check Logs for errors
- Verify environment variables are set
- Ensure DATABASE_URL is correct

### Database connection fails
- Check PostgreSQL is running
- Verify DATABASE_URL format: `postgresql://user:pass@host/db`
- Test connection in app logs

---

## ðŸ“ˆ Monitoring

**Metrics Available:**
- CPU usage
- Memory usage
- Request count
- Response times
- Error rates

Access: Dashboard â†’ Your Service â†’ Metrics

---

## ðŸŽ‰ Success Checklist

- [ ] Code pushed to GitHub
- [ ] Render account created
- [ ] Web service created
- [ ] PostgreSQL database added
- [ ] Environment variables set
- [ ] Build successful
- [ ] App deployed
- [ ] Health check returns 200
- [ ] Database tables created
- [ ] Contact form works
- [ ] Emails sending

---

## ðŸ“ž Support

- Render Docs: https://render.com/docs
- Community: https://community.render.com
- Status: https://status.render.com

---

**Your app will be live at**: `https://your-service-name.onrender.com`

